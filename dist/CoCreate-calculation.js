(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["calculation"] = factory();
	else
		root["CoCreate"] = root["CoCreate"] || {}, root["CoCreate"]["calculation"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nvar CoCreateCalculation = {\n  init: function init() {\n    this.initCalculationElements();\n  },\n  initCalculationElements: function initCalculationElements(container) {\n    var mainContainer = container || document;\n\n    if (!mainContainer.querySelectorAll) {\n      return;\n    }\n\n    var calculationElements = mainContainer.querySelectorAll('[data-calculation]') || [];\n    calculationElements = Array.from(calculationElements);\n\n    if (mainContainer != document && mainContainer.hasAttribute('data-calculation')) {\n      calculationElements.push(mainContainer);\n    }\n\n    for (var i = 0; i < calculationElements.length; i++) {\n      if (CoCreate.observer.getInitialized(calculationElements[i], \"calculation_init\")) {\n        return;\n      }\n\n      CoCreate.observer.setInitialized(calculationElements[i], \"calculation_init\");\n      this.initCalculationElement(calculationElements[i]);\n    }\n  },\n  initCalculationElement: function initCalculationElement(ele) {\n    var self = this;\n    var data_calculation = ele.getAttribute('data-calculation');\n    var ids = this.getIds(data_calculation);\n    console.log(data_calculation, ids);\n    var selectors = [];\n\n    for (var i = 0; i < ids.length; i++) {\n      var id = ids[i];\n      var input = null;\n\n      try {\n        input = document.querySelector(id);\n      } catch (error) {\n        input = null;\n      }\n\n      if (input) {\n        input.addEventListener('input', function () {\n          self.setCalcationResult(ele);\n        });\n        input.addEventListener('CoCreateInput-setvalue', function () {// self.setCalcationResult(ele)\n        });\n\n        if (input.hasAttribute('data-calculation')) {\n          input.addEventListener('changedCalcValue', function (e) {\n            self.setCalcationResult(ele);\n          });\n        }\n      } else {\n        //. add event of special operator\n        var selector = this.__getOperatorSelector(id);\n\n        if (selector) {\n          selectors.push(selector);\n        }\n      }\n    }\n\n    if (selectors.length > 0) {\n      document.addEventListener('changedCalcValue', function (e) {\n        var isMatched = false;\n        selectors.forEach(function (selector) {\n          if (e.target.matches(selector)) {\n            isMatched = true;\n            return;\n          }\n        });\n\n        if (isMatched) {\n          self.setCalcationResult(ele);\n        }\n      });\n    }\n  },\n  __getOperatorSelector: function __getOperatorSelector(value) {\n    var result = /SUM\\(\\s*([\\w\\W]+)\\s*\\)/g.exec(value);\n\n    if (result && result[1]) {\n      return result[1].trim();\n    }\n\n    return null;\n  },\n  calculationSpecialOperator: function calculationSpecialOperator(value) {\n    var self = this;\n    var sum = null;\n    var result = /SUM\\(\\s*([\\w\\W]+)\\s*\\)/g.exec(value);\n\n    if (result) {\n      var selector = result[1].trim();\n\n      if (value.trim().indexOf('SUM') == 0) {\n        var elements = document.querySelectorAll(selector);\n        sum = 0;\n        elements.forEach(function (el) {\n          var tmpValue = self.__getElementValue(el);\n\n          tmpValue = Number(tmpValue);\n\n          if (!Number.isNaN(tmpValue)) {\n            sum += tmpValue;\n          }\n        });\n      }\n    }\n\n    return sum;\n  },\n  setCalcationResult: function setCalcationResult(ele) {\n    var data_calculation = ele.getAttribute('data-calculation');\n    var calString = this.replaceIdWithValue(data_calculation);\n\n    if (calString) {\n      var result = calculation(calString);\n\n      if (ele.tagName == 'INPUT' || ele.tagName == 'TEXTAREA' || ele.tagName == 'SELECT') {\n        ele.value = result;\n\n        if (window.CoCreate.input.isUsageY(ele)) {\n          ele.value = \"\";\n          window.CoCreate.crdt.replaceText({\n            collection: ele.getAttribute('data-collection'),\n            document_id: ele.getAttribute('data-document_id'),\n            name: ele.getAttribute('name'),\n            value: result.toString()\n          });\n        } else {\n          window.CoCreate.input.save(ele);\n        } // window.CoCreate.input.save(ele);\n\n\n        if (CoCreate.floatingLabel) {\n          CoCreate.floatingLabel.update(ele, ele.value);\n        }\n      } else {\n        ele.innerHTML = result;\n        window.CoCreate.htmltags.saveContent(ele);\n      } //. set custom event\n\n\n      var event = new CustomEvent('changedCalcValue', {\n        bubbles: true\n      });\n      ele.dispatchEvent(event);\n    }\n  },\n  __getElementValue: function __getElementValue(element) {\n    if (element.tagName == 'INPUT' || element.tagName == 'TEXTAREA' || element.tagName == 'SELECT') {\n      return element.value;\n    } else {\n      return element.innerHTML;\n    }\n  },\n  replaceIdWithValue: function replaceIdWithValue(data_calculation) {\n    var ids = this.getIds(data_calculation);\n\n    for (var i = 0; i < ids.length; i++) {\n      var id = ids[i];\n      var input = null;\n\n      try {\n        input = document.querySelector(id);\n      } catch (error) {\n        input = null;\n      }\n\n      var value = null;\n\n      if (input) {\n        value = Number(this.__getElementValue(input));\n      } else {\n        value = this.calculationSpecialOperator(id);\n      }\n\n      if (value != null && !Number.isNaN(value)) {\n        data_calculation = data_calculation.replaceAll('{' + id + '}', value);\n      }\n    }\n\n    return data_calculation;\n  },\n  getIds: function getIds(string) {\n    var tmp = string;\n    var ids = [];\n    if (!tmp) return ids;\n\n    while (tmp.length > 0) {\n      var firstIndex = tmp.indexOf('{');\n      var secondIndex = tmp.indexOf('}', firstIndex);\n\n      if (firstIndex > -1 && secondIndex > -1) {\n        var id = tmp.substring(firstIndex + 1, secondIndex);\n        if (ids.indexOf(id) == -1) ids.push(id);\n        tmp = tmp.substring(secondIndex + 1);\n      } else {\n        return ids;\n      }\n    }\n\n    return ids;\n  }\n};\n\nfunction calculation(string) {\n  var index1, index2, index3, index4;\n  index1 = string.indexOf('+');\n  index2 = string.indexOf('-');\n  index3 = string.indexOf('*');\n  index4 = string.indexOf('/');\n\n  if (index1 > -1) {\n    var lStr = string.substr(0, index1);\n    var rStr = string.substr(index1 + 1);\n    return calculation(lStr) + calculation(rStr);\n  } else if (index2 > -1) {\n    var _lStr = string.substr(0, index2);\n\n    var _rStr = string.substr(index2 + 1);\n\n    return calculation(_lStr) - calculation(_rStr);\n  } else if (index3 > -1) {\n    var _lStr2 = string.substr(0, index3);\n\n    var _rStr2 = string.substr(index3 + 1);\n\n    return calculation(_lStr2) * calculation(_rStr2);\n  } else if (index4 > -1) {\n    var _lStr3 = string.substr(0, index4);\n\n    var _rStr3 = string.substr(index4 + 1);\n\n    var lValue = calculation(_lStr3);\n    var rValue = calculation(_rStr3);\n\n    if (rValue == 0) {\n      return 0;\n    } else {\n      return lValue / rValue;\n    }\n  } else {\n    var result = Number(string);\n\n    if (isNaN(result)) {\n      return 0;\n    } else {\n      return result;\n    }\n  }\n}\n\nCoCreateCalculation.init();\nCoCreate.observer.init({\n  name: 'CoCreateCalculationChangeValue',\n  observe: ['attributes'],\n  attributes: ['value'],\n  include: 'input',\n  callback: function callback(mutation) {\n    console.log('-----------------------------------------------------');\n    console.log(mutation.target);\n  }\n});\nCoCreate.observer.init({\n  name: 'CoCreateCalculationInit',\n  observe: ['subtree', 'childList'],\n  include: '[data-calculation]',\n  callback: function callback(mutation) {\n    CoCreateCalculation.initCalculationElements(mutation.target);\n  }\n});\n/* harmony default export */ __webpack_exports__[\"default\"] = (CoCreateCalculation);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9Db0NyZWF0ZS5jYWxjdWxhdGlvbi8uL3NyYy9pbmRleC5qcz9iNjM1Il0sIm5hbWVzIjpbIkNvQ3JlYXRlQ2FsY3VsYXRpb24iLCJpbml0IiwiaW5pdENhbGN1bGF0aW9uRWxlbWVudHMiLCJjb250YWluZXIiLCJtYWluQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FsY3VsYXRpb25FbGVtZW50cyIsIkFycmF5IiwiZnJvbSIsImhhc0F0dHJpYnV0ZSIsInB1c2giLCJpIiwibGVuZ3RoIiwiQ29DcmVhdGUiLCJvYnNlcnZlciIsImdldEluaXRpYWxpemVkIiwic2V0SW5pdGlhbGl6ZWQiLCJpbml0Q2FsY3VsYXRpb25FbGVtZW50IiwiZWxlIiwic2VsZiIsImRhdGFfY2FsY3VsYXRpb24iLCJnZXRBdHRyaWJ1dGUiLCJpZHMiLCJnZXRJZHMiLCJjb25zb2xlIiwibG9nIiwic2VsZWN0b3JzIiwiaWQiLCJpbnB1dCIsInF1ZXJ5U2VsZWN0b3IiLCJlcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRDYWxjYXRpb25SZXN1bHQiLCJlIiwic2VsZWN0b3IiLCJfX2dldE9wZXJhdG9yU2VsZWN0b3IiLCJpc01hdGNoZWQiLCJmb3JFYWNoIiwidGFyZ2V0IiwibWF0Y2hlcyIsInZhbHVlIiwicmVzdWx0IiwiZXhlYyIsInRyaW0iLCJjYWxjdWxhdGlvblNwZWNpYWxPcGVyYXRvciIsInN1bSIsImluZGV4T2YiLCJlbGVtZW50cyIsImVsIiwidG1wVmFsdWUiLCJfX2dldEVsZW1lbnRWYWx1ZSIsIk51bWJlciIsImlzTmFOIiwiY2FsU3RyaW5nIiwicmVwbGFjZUlkV2l0aFZhbHVlIiwiY2FsY3VsYXRpb24iLCJ0YWdOYW1lIiwid2luZG93IiwiaXNVc2FnZVkiLCJjcmR0IiwicmVwbGFjZVRleHQiLCJjb2xsZWN0aW9uIiwiZG9jdW1lbnRfaWQiLCJuYW1lIiwidG9TdHJpbmciLCJzYXZlIiwiZmxvYXRpbmdMYWJlbCIsInVwZGF0ZSIsImlubmVySFRNTCIsImh0bWx0YWdzIiwic2F2ZUNvbnRlbnQiLCJldmVudCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImRpc3BhdGNoRXZlbnQiLCJlbGVtZW50IiwicmVwbGFjZUFsbCIsInN0cmluZyIsInRtcCIsImZpcnN0SW5kZXgiLCJzZWNvbmRJbmRleCIsInN1YnN0cmluZyIsImluZGV4MSIsImluZGV4MiIsImluZGV4MyIsImluZGV4NCIsImxTdHIiLCJzdWJzdHIiLCJyU3RyIiwibFZhbHVlIiwiclZhbHVlIiwib2JzZXJ2ZSIsImF0dHJpYnV0ZXMiLCJpbmNsdWRlIiwiY2FsbGJhY2siLCJtdXRhdGlvbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQSxJQUFJQSxtQkFBbUIsR0FBRztBQUN4QkMsTUFBSSxFQUFFLGdCQUFXO0FBQ2YsU0FBS0MsdUJBQUw7QUFDRCxHQUh1QjtBQU14QkEseUJBQXVCLEVBQUUsaUNBQVNDLFNBQVQsRUFBb0I7QUFDM0MsUUFBTUMsYUFBYSxHQUFHRCxTQUFTLElBQUlFLFFBQW5DOztBQUNBLFFBQUksQ0FBQ0QsYUFBYSxDQUFDRSxnQkFBbkIsRUFBcUM7QUFDbkM7QUFDRDs7QUFDRCxRQUFJQyxtQkFBbUIsR0FBR0gsYUFBYSxDQUFDRSxnQkFBZCxDQUErQixvQkFBL0IsS0FBd0QsRUFBbEY7QUFDQUMsdUJBQW1CLEdBQUdDLEtBQUssQ0FBQ0MsSUFBTixDQUFXRixtQkFBWCxDQUF0Qjs7QUFFQSxRQUFJSCxhQUFhLElBQUlDLFFBQWpCLElBQTZCRCxhQUFhLENBQUNNLFlBQWQsQ0FBMkIsa0JBQTNCLENBQWpDLEVBQWlGO0FBQy9FSCx5QkFBbUIsQ0FBQ0ksSUFBcEIsQ0FBeUJQLGFBQXpCO0FBQ0Q7O0FBRUQsU0FBSyxJQUFJUSxDQUFDLEdBQUMsQ0FBWCxFQUFjQSxDQUFDLEdBQUNMLG1CQUFtQixDQUFDTSxNQUFwQyxFQUE0Q0QsQ0FBQyxFQUE3QyxFQUFpRDtBQUNoRCxVQUFJRSxRQUFRLENBQUNDLFFBQVQsQ0FBa0JDLGNB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RUFBbUI7QUFDM0J2RSxXQUFPLENBQUNDLEdBQVIsQ0FBWSx1REFBWjtBQUNERCxXQUFPLENBQUNDLEdBQVIsQ0FBWXNFLFFBQVEsQ0FBQ3pELE1BQXJCO0FBQ0E7QUFScUIsQ0FBdkI7QUFXQXpCLFFBQVEsQ0FBQ0MsUUFBVCxDQUFrQmQsSUFBbEIsQ0FBdUI7QUFDdEIrRCxNQUFJLEVBQUUseUJBRGdCO0FBRXRCNEIsU0FBTyxFQUFFLENBQUMsU0FBRCxFQUFZLFdBQVosQ0FGYTtBQUdyQkUsU0FBTyxFQUFFLG9CQUhZO0FBSXRCQyxVQUFRLEVBQUUsa0JBQVNDLFFBQVQsRUFBbUI7QUFDNUJoRyx1QkFBbUIsQ0FBQ0UsdUJBQXBCLENBQTRDOEYsUUFBUSxDQUFDekQsTUFBckQ7QUFDQTtBQU5xQixDQUF2QjtBQVNldkMsa0ZBQWYiLCJmaWxlIjoiLi9zcmMvaW5kZXguanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgQ29DcmVhdGVDYWxjdWxhdGlvbiA9IHtcbiAgaW5pdDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbml0Q2FsY3VsYXRpb25FbGVtZW50cygpO1xuICB9LFxuICAgIFxuICAgIFxuICBpbml0Q2FsY3VsYXRpb25FbGVtZW50czogZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gICAgY29uc3QgbWFpbkNvbnRhaW5lciA9IGNvbnRhaW5lciB8fCBkb2N1bWVudDtcbiAgICBpZiAoIW1haW5Db250YWluZXIucXVlcnlTZWxlY3RvckFsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgY2FsY3VsYXRpb25FbGVtZW50cyA9IG1haW5Db250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2FsY3VsYXRpb25dJykgfHwgW107XG4gICAgY2FsY3VsYXRpb25FbGVtZW50cyA9IEFycmF5LmZyb20oY2FsY3VsYXRpb25FbGVtZW50cyk7XG4gICAgXG4gICAgaWYgKG1haW5Db250YWluZXIgIT0gZG9jdW1lbnQgJiYgbWFpbkNvbnRhaW5lci5oYXNBdHRyaWJ1dGUoJ2RhdGEtY2FsY3VsYXRpb24nKSkge1xuICAgICAgY2FsY3VsYXRpb25FbGVtZW50cy5wdXNoKG1haW5Db250YWluZXIpOyAgXG4gICAgfVxuICAgIFxuICAgIGZvciAobGV0IGk9MDsgaTxjYWxjdWxhdGlvbkVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgXHRpZiAoQ29DcmVhdGUub2JzZXJ2ZXIuZ2V0SW5pdGlhbGl6ZWQoY2FsY3VsYXRpb25FbGVtZW50c1tpXSwgXCJjYWxjdWxhdGlvbl9pbml0XCIpKSB7XG4gIFx0XHRcdHJldHVybjtcbiAgXHRcdH1cbiAgXHRcdENvQ3JlYXRlLm9ic2VydmVyLnNldEluaXRpYWxpemVkKGNhbGN1bGF0aW9uRWxlbWVudHNbaV0sIFwiY2FsY3VsYXRpb25faW5pdFwiKVxuICBcdFx0XG4gICAgICB0aGlzLmluaXRDYWxjdWxhdGlvbkVsZW1lbnQoY2FsY3VsYXRpb25FbGVtZW50c1tpXSk7ICBcbiAgICB9XG4gICAgXG4gIH0sXG4gICAgXG4gIGluaXRDYWxjdWxhdGlvbkVsZW1lbnQ6IGZ1bmN0aW9uKGVsZSkge1xuICAgIFxuICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICBsZXQgZGF0YV9jYWxjdWxhdGlvbiA9IGVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsY3VsYXRpb24nKTtcbiAgICAgIGxldCBpZHMgPSB0aGlzLmdldElkcyhkYXRhX2NhbGN1bGF0aW9uKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coZGF0YV9jYWxjdWxhdGlvbiwgaWRzKVxuICAgICAgXG4gICAgICBsZXQgc2VsZWN0b3JzID0gW107XG4gICAgICBcbiAgICAgIFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IGlkID0gaWRzW2ldO1xuICAgICAgICBcbiAgICAgICAgbGV0IGlucHV0ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikgeyBpbnB1dCA9IG51bGw7IH1cbiAgICAgICAgXG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLnNldENhbGNhdGlvblJlc3VsdChlbGUpO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgXG4gICAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignQ29DcmVhdGVJbnB1dC1zZXR2YWx1ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAvLyBzZWxmLnNldENhbGNhdGlvblJlc3VsdChlbGUpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoaW5wdXQuaGFzQXR0cmlidXRlKCdkYXRhLWNhbGN1bGF0aW9uJykpIHtcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZWRDYWxjVmFsdWUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgIHNlbGYuc2V0Q2FsY2F0aW9uUmVzdWx0KGVsZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vLiBhZGQgZXZlbnQgb2Ygc3BlY2lhbCBvcGVyYXRvclxuICAgICAgICAgIFxuICAgICAgICAgIGxldCBzZWxlY3RvciA9IHRoaXMuX19nZXRPcGVyYXRvclNlbGVjdG9yKGlkKTtcbiAgICAgICAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHNlbGVjdG9ycy5wdXNoKHNlbGVjdG9yKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoc2VsZWN0b3JzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlZENhbGNWYWx1ZScsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICAgIGxldCBpc01hdGNoZWQgPSBmYWxzZTtcbiAgICAgICAgICBzZWxlY3RvcnMuZm9yRWFjaChzZWxlY3RvciA9PiB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhzZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgaXNNYXRjaGVkID0gdHJ1ZTsgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBpZiAoaXNNYXRjaGVkKSB7XG4gICAgICAgICAgICBzZWxmLnNldENhbGNhdGlvblJlc3VsdChlbGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIH1cbiAgfSxcbiAgXG4gIF9fZ2V0T3BlcmF0b3JTZWxlY3Rvcih2YWx1ZSkge1xuICAgIGxldCByZXN1bHQgPSAvU1VNXFwoXFxzKihbXFx3XFxXXSspXFxzKlxcKS9nLmV4ZWModmFsdWUpO1xuICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0WzFdKSB7XG4gICAgICByZXR1cm4gcmVzdWx0WzFdLnRyaW0oKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH0sXG4gIFxuICBjYWxjdWxhdGlvblNwZWNpYWxPcGVyYXRvcih2YWx1ZSkge1xuICAgIGxldCBzZWxmID0gdGhpcztcbiAgICBsZXQgc3VtID0gbnVsbDtcbiAgICBsZXQgcmVzdWx0ID0gL1NVTVxcKFxccyooW1xcd1xcV10rKVxccypcXCkvZy5leGVjKHZhbHVlKTtcbiAgICBpZiAocmVzdWx0KSB7XG4gICAgICBsZXQgc2VsZWN0b3IgPSByZXN1bHRbMV0udHJpbSgpXG4gICAgICBcbiAgICAgIGlmICh2YWx1ZS50cmltKCkuaW5kZXhPZignU1VNJykgPT0gMCkge1xuICAgICAgICBsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKVxuICAgICAgICBzdW0gPSAwO1xuICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICBsZXQgdG1wVmFsdWUgPSBzZWxmLl9fZ2V0RWxlbWVudFZhbHVlKGVsKTtcbiAgICAgICAgICB0bXBWYWx1ZSA9IE51bWJlcih0bXBWYWx1ZSk7XG4gICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4odG1wVmFsdWUpKSB7XG4gICAgICAgICAgICBzdW0gKz0gdG1wVmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gXG4gICAgcmV0dXJuIHN1bVxuICB9LFxuICBcbiAgICBcbiAgc2V0Q2FsY2F0aW9uUmVzdWx0OiBmdW5jdGlvbihlbGUpIHtcbiAgICBsZXQgZGF0YV9jYWxjdWxhdGlvbiA9IGVsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsY3VsYXRpb24nKTtcbiAgICBcbiAgICBsZXQgY2FsU3RyaW5nID0gdGhpcy5yZXBsYWNlSWRXaXRoVmFsdWUoZGF0YV9jYWxjdWxhdGlvbik7XG4gICAgXG4gICAgaWYgKGNhbFN0cmluZykge1xuICAgICAgbGV0IHJlc3VsdCA9IGNhbGN1bGF0aW9uKGNhbFN0cmluZyk7XG4gICAgICBpZiAoZWxlLnRhZ05hbWUgPT0gJ0lOUFVUJyB8fCBlbGUudGFnTmFtZSA9PSAnVEVYVEFSRUEnIHx8IGVsZS50YWdOYW1lID09ICdTRUxFQ1QnKSB7XG4gICAgICAgIGVsZS52YWx1ZSA9IHJlc3VsdFxuICAgICAgICBcbiAgICAgICAgaWYgKHdpbmRvdy5Db0NyZWF0ZS5pbnB1dC5pc1VzYWdlWShlbGUpKSB7XG4gICAgICAgICAgZWxlLnZhbHVlID0gXCJcIjtcbiAgICAgICAgICB3aW5kb3cuQ29DcmVhdGUuY3JkdC5yZXBsYWNlVGV4dCh7XG4gICAgICAgICAgICBjb2xsZWN0aW9uOiBlbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWNvbGxlY3Rpb24nKSxcbiAgICAgICAgICAgIGRvY3VtZW50X2lkOiBlbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWRvY3VtZW50X2lkJyksXG4gICAgICAgICAgICBuYW1lOiBlbGUuZ2V0QXR0cmlidXRlKCduYW1lJyksXG4gICAgICAgICAgICB2YWx1ZTogcmVzdWx0LnRvU3RyaW5nKClcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHdpbmRvdy5Db0NyZWF0ZS5pbnB1dC5zYXZlKGVsZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIHdpbmRvdy5Db0NyZWF0ZS5pbnB1dC5zYXZlKGVsZSk7XG4gICAgICAgIGlmIChDb0NyZWF0ZS5mbG9hdGluZ0xhYmVsKSAgIHtcbiAgICAgICAgICBDb0NyZWF0ZS5mbG9hdGluZ0xhYmVsLnVwZGF0ZShlbGUsIGVsZS52YWx1ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlLmlubmVySFRNTCA9IHJlc3VsdDtcbiAgICAgICAgd2luZG93LkNvQ3JlYXRlLmh0bWx0YWdzLnNhdmVDb250ZW50KGVsZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vLiBzZXQgY3VzdG9tIGV2ZW50XG4gICAgICB2YXIgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NoYW5nZWRDYWxjVmFsdWUnLCB7XG4gICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICB9KVxuICAgICAgZWxlLmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBcbiAgfSxcbiAgXG4gIF9fZ2V0RWxlbWVudFZhbHVlOiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgaWYgKGVsZW1lbnQudGFnTmFtZSA9PSAnSU5QVVQnIHx8IGVsZW1lbnQudGFnTmFtZSA9PSAnVEVYVEFSRUEnIHx8IGVsZW1lbnQudGFnTmFtZSA9PSAnU0VMRUNUJykge1xuICAgICAgcmV0dXJuIGVsZW1lbnQudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBlbGVtZW50LmlubmVySFRNTDtcbiAgICB9XG4gIH0sXG4gICAgXG4gIHJlcGxhY2VJZFdpdGhWYWx1ZTogZnVuY3Rpb24oZGF0YV9jYWxjdWxhdGlvbikge1xuICAgIGxldCBpZHMgPSB0aGlzLmdldElkcyhkYXRhX2NhbGN1bGF0aW9uKTtcblxuICAgIGZvciAobGV0IGk9MDsgaSA8IGlkcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGlkID0gaWRzW2ldO1xuICAgICAgXG4gICAgICBsZXQgaW5wdXQgPSBudWxsO1xuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaWQpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHsgaW5wdXQgPSBudWxsOyB9XG4gICAgICBcbiAgICAgIGxldCB2YWx1ZSA9IG51bGw7XG4gICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgdmFsdWUgPSBOdW1iZXIodGhpcy5fX2dldEVsZW1lbnRWYWx1ZShpbnB1dCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSB0aGlzLmNhbGN1bGF0aW9uU3BlY2lhbE9wZXJhdG9yKGlkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgIU51bWJlci5pc05hTih2YWx1ZSkpIHtcbiAgICAgICAgZGF0YV9jYWxjdWxhdGlvbiA9IGRhdGFfY2FsY3VsYXRpb24ucmVwbGFjZUFsbCgneycgKyBpZCArICd9JywgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gZGF0YV9jYWxjdWxhdGlvbjtcbiAgfSxcbiAgICBcbiAgZ2V0SWRzOiBmdW5jdGlvbihzdHJpbmcpIHtcbiAgICBsZXQgdG1wID0gc3RyaW5nO1xuICAgIFxuICAgIGxldCBpZHMgPSBbXVxuICAgIGlmICghdG1wKSByZXR1cm4gaWRzO1xuICAgIHdoaWxlICh0bXAubGVuZ3RoID4gMCkge1xuICAgICAgbGV0IGZpcnN0SW5kZXggPSB0bXAuaW5kZXhPZigneycpO1xuICAgICAgbGV0IHNlY29uZEluZGV4ID0gdG1wLmluZGV4T2YoJ30nLCBmaXJzdEluZGV4KTtcbiAgICAgIFxuICAgICAgaWYgKGZpcnN0SW5kZXggPiAtMSAmJiBzZWNvbmRJbmRleCA+IC0xKSB7XG4gICAgICAgIGxldCBpZCA9IHRtcC5zdWJzdHJpbmcoZmlyc3RJbmRleCArIDEsIHNlY29uZEluZGV4KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChpZHMuaW5kZXhPZihpZCkgPT0gLTEpIGlkcy5wdXNoKGlkKTtcbiAgXG4gICAgICAgIHRtcCA9IHRtcC5zdWJzdHJpbmcoc2Vjb25kSW5kZXggKyAxKTtcbiAgICAgICAgXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gaWRzO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gaWRzO1xuICB9LFxufVxuXG5mdW5jdGlvbiBjYWxjdWxhdGlvbihzdHJpbmcpIHtcbiAgbGV0IGluZGV4MSwgaW5kZXgyLCBpbmRleDMsIGluZGV4NDtcbiAgXG4gIGluZGV4MSA9IHN0cmluZy5pbmRleE9mKCcrJyk7XG4gIGluZGV4MiA9IHN0cmluZy5pbmRleE9mKCctJyk7XG4gIGluZGV4MyA9IHN0cmluZy5pbmRleE9mKCcqJyk7XG4gIGluZGV4NCA9IHN0cmluZy5pbmRleE9mKCcvJyk7XG4gIFxuICBcbiAgaWYgKGluZGV4MSA+IC0xKSB7XG4gICAgbGV0IGxTdHIgPSBzdHJpbmcuc3Vic3RyKDAsIGluZGV4MSk7XG4gICAgbGV0IHJTdHIgPSBzdHJpbmcuc3Vic3RyKGluZGV4MSArIDEpO1xuICAgIFxuICAgIHJldHVybiBjYWxjdWxhdGlvbihsU3RyKSArIGNhbGN1bGF0aW9uKHJTdHIpO1xuICAgIFxuICB9IGVsc2UgaWYgKGluZGV4MiA+IC0xKSB7XG4gICAgbGV0IGxTdHIgPSBzdHJpbmcuc3Vic3RyKDAsIGluZGV4Mik7XG4gICAgbGV0IHJTdHIgPSBzdHJpbmcuc3Vic3RyKGluZGV4MiArIDEpO1xuICAgIFxuICAgIHJldHVybiBjYWxjdWxhdGlvbihsU3RyKSAtIGNhbGN1bGF0aW9uKHJTdHIpO1xuICAgIFxuICB9IGVsc2UgaWYgKGluZGV4MyA+IC0xKSB7XG4gICAgbGV0IGxTdHIgPSBzdHJpbmcuc3Vic3RyKDAsIGluZGV4Myk7XG4gICAgbGV0IHJTdHIgPSBzdHJpbmcuc3Vic3RyKGluZGV4MyArIDEpO1xuICAgIFxuICAgIHJldHVybiBjYWxjdWxhdGlvbihsU3RyKSAqIGNhbGN1bGF0aW9uKHJTdHIpO1xuICB9IGVsc2UgaWYgKGluZGV4NCA+IC0xKSB7XG4gICAgbGV0IGxTdHIgPSBzdHJpbmcuc3Vic3RyKDAsIGluZGV4NCk7XG4gICAgbGV0IHJTdHIgPSBzdHJpbmcuc3Vic3RyKGluZGV4NCArIDEpO1xuICAgIFxuICAgIGxldCBsVmFsdWUgPSBjYWxjdWxhdGlvbihsU3RyKTtcbiAgICBsZXQgclZhbHVlID0gY2FsY3VsYXRpb24oclN0cik7XG4gICAgXG4gICAgaWYgKHJWYWx1ZSA9PSAwKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGxWYWx1ZSAvIHJWYWx1ZTtcbiAgICB9XG4gICAgXG4gIH0gZWxzZSB7XG4gICAgbGV0IHJlc3VsdCA9IE51bWJlcihzdHJpbmcpO1xuICAgIFxuICAgIGlmIChpc05hTihyZXN1bHQpKSB7XG4gICAgICByZXR1cm4gMDsgXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIFxuICAgIFxuICB9XG4gIFxufVxuXG5Db0NyZWF0ZUNhbGN1bGF0aW9uLmluaXQoKTtcblxuQ29DcmVhdGUub2JzZXJ2ZXIuaW5pdCh7IFxuXHRuYW1lOiAnQ29DcmVhdGVDYWxjdWxhdGlvbkNoYW5nZVZhbHVlJywgXG5cdG9ic2VydmU6IFsnYXR0cmlidXRlcyddLFxuXHRhdHRyaWJ1dGVzOiBbJ3ZhbHVlJ10sXG4gIGluY2x1ZGU6ICdpbnB1dCcsXG5cdGNhbGxiYWNrOiBmdW5jdGlvbihtdXRhdGlvbikge1xuXHQgIGNvbnNvbGUubG9nKCctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLScpXG5cdFx0Y29uc29sZS5sb2cobXV0YXRpb24udGFyZ2V0KVxuXHR9XG59KTtcblxuQ29DcmVhdGUub2JzZXJ2ZXIuaW5pdCh7IFxuXHRuYW1lOiAnQ29DcmVhdGVDYWxjdWxhdGlvbkluaXQnLCBcblx0b2JzZXJ2ZTogWydzdWJ0cmVlJywgJ2NoaWxkTGlzdCddLFxuICBpbmNsdWRlOiAnW2RhdGEtY2FsY3VsYXRpb25dJyxcblx0Y2FsbGJhY2s6IGZ1bmN0aW9uKG11dGF0aW9uKSB7XG5cdFx0Q29DcmVhdGVDYWxjdWxhdGlvbi5pbml0Q2FsY3VsYXRpb25FbGVtZW50cyhtdXRhdGlvbi50YXJnZXQpXG5cdH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDb0NyZWF0ZUNhbGN1bGF0aW9uOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ })

/******/ })["default"];
});